!function(T){T.fn.columnFilter=function(e){var d,_,S,x,f="From {from} to {to}",l=new Array,h=new Array,F=function(){};function y(e,t,n,a,r){if(void 0===t)return new Array;var l;void 0===n&&(n=!0),void 0===a&&(a=!0),void 0===r&&(r=!0),l=1==a?e.aiDisplay:e.aiDisplayMaster;for(var i=new Array,s=0,o=l.length;s<o;s++){var c=l[s],u=b.fnGetData(c)[t];1==r&&0==u.length||(1==n&&-1<jQuery.inArray(u,i)||i.push(u))}return i.sort()}function p(e){return w.bUseColVis?e:b.fnSettings().oApi._fnVisibleToColumnIndex(b.fnSettings(),e)}function g(n,a,r,e,l,t){var i="text_filter form-control";e&&(i="number_filter form-control"),S=S.replace(/(^\s*)|(\s*$)/g,"");var s=n.fnSettings().aoPreSearchCols[_].sSearch,o="search_init ",c=S;""!=s&&"^"!=s&&(c=e&&"^"==s.charAt(0)?s.substr(1):s,o="");var u=T('<input type="text" class="md-input '+o+i+'" value="'+c+'" rel="'+_+'" md-input />');null!=t&&-1!=t&&u.attr("maxlength",t),x.html(u),e?x.wrapInner('<span class="filter_column filter_number" />'):x.wrapInner('<span class="filter_column filter_text" />'),d[_]=S;var f=_;e&&!n.fnSettings().oFeatures.bServerSide?u.keyup(function(){n.fnFilter("^"+this.value,p(f),!0,!1),F()}):u.keyup(function(){if(n.fnSettings().oFeatures.bServerSide&&0!=l){n.fnSettings().aoPreSearchCols[f].sSearch;var e=T(this).data("dt-iLastFilterLength");void 0===e&&(e=0);var t=this.value.length;if(Math.abs(t-e)<l)return;T(this).data("dt-iLastFilterLength",t)}n.fnFilter(this.value,p(f),a,r),F()}),u.focus(function(){T(this).hasClass("search_init")&&(T(this).removeClass("search_init"),this.value="")}),u.blur(function(){""==this.value&&(T(this).addClass("search_init"),this.value=d[f])})}function v(a,e,t,n,r,l,i,s){null==e&&(e=y(a.fnSettings(),t,!0,!1,!0));var o=t,c=a.fnSettings().aoPreSearchCols[_].sSearch;null!=c&&""!=c||(c=i);var u='<select class="search_init select_filter form-control" rel="'+_+'"><option value="" class="search_init">'+r+"</option>";s&&(u='<select class="search_init select_filter form-control" rel="'+_+'" multiple>');var f=0,d=e.length;for(f=0;f<d;f++)if("object"!=typeof e[f]){var h="";escape(e[f])!=c&&escape(e[f])!=escape(c)||(h="selected "),u+="<option "+h+' value="'+escape(e[f])+'">'+e[f]+"</option>"}else{h="";l?(e[f].value==c&&(h="selected "),u+="<option "+h+'value="'+e[f].value+'">'+e[f].label+"</option>"):(escape(e[f].value)==c&&(h="selected "),u+="<option "+h+'value="'+escape(e[f].value)+'">'+e[f].label+"</option>")}var p=T(u+"</select>");n.html(p),n.wrapInner('<span class="filter_column filter_select" />'),s?p.change(function(){""!=T(this).val()?T(this).removeClass("search_init"):T(this).addClass("search_init");var e=T(this).val(),n=[];if(null==e||e==[])var t="^(.*)$";else{T.each(e,function(e,t){n.push(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))});t="^("+n.join("|")+")$"}a.fnFilter(t,o,!0,!1)}):(p.change(function(){""!=T(this).val()?T(this).removeClass("search_init"):T(this).addClass("search_init"),l?a.fnFilter(T(this).val(),t,l):a.fnFilter(unescape(T(this).val()),t),F()}),null!=c&&""!=c&&a.fnFilter(unescape(c),t))}function m(e){switch(e){case 0:return f.substring(0,f.indexOf("{from}"));case 1:return f.substring(f.indexOf("{from}")+6,f.indexOf("{to}"));default:return f.substring(f.indexOf("{to}")+4)}}var b=this,w=T.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},e);return this.each(function(){if(b.fnSettings().oFeatures.bFilter){d=new Array;var e=b.fnSettings().aoFooter[0];b.fnSettings().nTFoot;if("head:after"==w.sPlaceHolder){var t=T("tr:first",b.fnSettings().nTHead).detach();e=b.fnSettings().bSortCellsTop?(t.prependTo(T(b.fnSettings().nTHead)),b.fnSettings().aoHeader[1]):(t.appendTo(T(b.fnSettings().nTHead)),b.fnSettings().aoHeader[0]),"tr:last",b.fnSettings().nTHead}else if("head:before"==w.sPlaceHolder){if(b.fnSettings().bSortCellsTop)(t=T("tr:first",b.fnSettings().nTHead).detach()).appendTo(T(b.fnSettings().nTHead)),e=b.fnSettings().aoHeader[1];else e=b.fnSettings().aoHeader[0];"tr:first",b.fnSettings().nTHead}for(T(e).each(function(e){_=e;var t,n,a,r,l,i,s,o,c,u={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=w.aoColumns){if(w.aoColumns.length<_||null==w.aoColumns[_])return;u=w.aoColumns[_]}if(S=T(T(this)[0].cell).text(),null==u.sSelector?x=T(T(this)[0].cell):0==(x=T(u.sSelector)).length&&(x=T(T(this)[0].cell)),null!=u)switch(f=null!=u.sRangeFormat?u.sRangeFormat:w.sRangeFormat,u.type){case"null":break;case"number":g(b,!0,!1,!0,u.iFilterLength,u.iMaxLenght);break;case"select":1!=u.bRegex&&(u.bRegex=!1),t=b,n=u.values,a=u.bRegex,r=u.selected,l=u.multiple,c=t.fnSettings(),null!=n&&"function"!=typeof n||""==c.sAjaxSource||c.oFeatures.bServerSide||c.aoDrawCallback.push({fn:(i=_,s=x,o=S,function(e){if(2==e.iDraw&&null!=e.sAjaxSource&&""!=e.sAjaxSource&&!e.oFeatures.bServerSide)return v(t,n&&n(e.aoData,e),p(i),s,o,a,r,l)}),sName:"column_filter_"+_}),v(t,"function"==typeof n?null:n,p(_),x,S,a,r,l);break;case"number-range":!function(i){x.html(m(0));var s=i.attr("id")+"_range_from_"+_,e=T('<input type="text" class="number_range_filter form-control" id="'+s+'" rel="'+_+'"/>');x.append(e),x.append(m(1));var o=i.attr("id")+"_range_to_"+_,t=T('<input type="text" class="number_range_filter form-control" id="'+o+'" rel="'+_+'"/>');x.append(t),x.append(m(2)),x.wrapInner('<span class="filter_column filter_number_range form-control" />');var c=_;h.push(_),i.dataTableExt.afnFiltering.push(function(e,t,n){if(i.attr("id")!=e.sTableId)return!0;if(null==document.getElementById(s))return!0;var a=1*document.getElementById(s).value,r=1*document.getElementById(o).value,l="-"==t[p(c)]?0:1*t[p(c)];return""==a&&""==r||""==a&&l<=r||a<=l&&""==r||a<=l&&l<=r}),T("#"+s+",#"+o,x).keyup(function(){var e=1*document.getElementById(s).value,t=1*document.getElementById(o).value;0!=e&&0!=t&&t<e||(i.fnDraw(),F())})}(b);break;case"date-range":!function(i){var e=f.split(/[}{]/);x.html("");var t=i.attr("id")+"_range_from_"+_,s=T('<input type="text" class="date_range_filter form-control" id="'+t+'" rel="'+_+'"/>');s.datepicker();var n=i.attr("id")+"_range_to_"+_,o=T('<input type="text" class="date_range_filter form-control" id="'+n+'" rel="'+_+'"/>');for(ti=0;ti<e.length;ti++)e[ti]==w.sDateFromToken?x.append(s):e[ti]==w.sDateToToken?x.append(o):x.append(e[ti]);x.wrapInner('<span class="filter_column filter_date_range" />'),o.datepicker();var c=_;h.push(_),i.dataTableExt.afnFiltering.push(function(e,t,n){if(i.attr("id")!=e.sTableId)return!0;var a=s.datepicker("getDate"),r=o.datepicker("getDate");if(null==a&&null==r)return!0;var l=null;try{if(null==t[p(c)]||""==t[p(c)])return!1;l=T.datepicker.parseDate(T.datepicker.regional[""].dateFormat,t[p(c)])}catch(e){return!1}return null!=l&&(null==a&&l<=r||a<=l&&null==r||a<=l&&l<=r)}),T("#"+t+",#"+n,x).change(function(){i.fnDraw(),F()})}(b);break;case"checkbox":!function(e,t){null==t&&(t=y(e.fnSettings(),_,!0,!0,!0));var n,r=_,a="",l=t.length,i=S.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_");i=i.replace(/[^a-zA-Z 0-9]+/g,"");var s=S;null==w.sFilterButtonText&&null==w.sFilterButtonText||(s=w.sFilterButtonText);var o=Math.floor(l/12);0<l%12&&(o+=1);var c=100/o-2,u=10*o;1==o&&(c=20);var f='<div style="float:left; min-width: '+c+'%; " >',d=e.attr("id")+i,h="chkBtnOpen"+d,p=d+"-flt-toggle";for(a+='<button id="'+h+'" class="checkbox_filter btn btn-default" > '+s+"</button>",a+='<div id="'+p+'" title="'+S+'" rel="'+_+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+u+'%; " >',a+=f,n=0;n<l;n++){n%12==0&&0!=n&&(a+="</div>"+f);var g=t[n],v=t[n];"object"==typeof t[n]&&(g=t[n].label,v=t[n].value);var m=T(a+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+d+"_cb_"+v+'" name= "'+i+'" value="'+v+'" >'+g+"<br/>");x.html(m),x.wrapInner('<span class="filter_column filter_checkbox" />'),m.change(function(){var t="",n="|",a=T('input:checkbox[name="'+i+'"]:checked').size();T('input:checkbox[name="'+i+'"]:checked').each(function(e){(0==e&&1==a||0!=e&&e==a-1)&&(n=""),t=(t=t.replace(/^\s+|\s+$/g,""))+T(this).val()+n,n="|"}),""!=t?T('input:checkbox[name="'+i+'"]').removeClass("search_init"):T('input:checkbox[name="'+i+'"]').addClass("search_init"),e.fnFilter(t,r,!0,!1),F()})}T("#"+h).button(),T("#"+p).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){return T('input:checkbox[name="'+i+'"]:checked').each(function(e){T(this).attr("checked",!1),T(this).addClass("search_init")}),e.fnFilter("",r,!0,!1),F(),!1}},{text:"Close",click:function(){T(this).dialog("close")}}]}),T("#"+h).click(function(){T("#"+p).dialog("open");var e=T(this);return T("#"+p).dialog("widget").position({my:"top",at:"bottom",of:e}),!1});var b=F;F=function(){var e=T("#"+h);T("#"+p).dialog("widget").position({my:"top",at:"bottom",of:e}),b()}}(b,u.values);break;case"twitter-dropdown":case"dropdown":!function(e){var t,n=_,a='<div class="dropdown select_filter form-control"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+S+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',r=e.length;for(t=0;t<r;t++)a+='<li data-value="'+e[t]+'"><a>'+e[t]+"</a></li>";var l=T(a+"</ul></div>");x.html(l),x.wrapInner('<span class="filterColumn filter_select" />'),l.find("li").click(function(){b.fnFilter(T(this).data("value"),n)})}(u.values);break;case"text":default:bRegex=null!=u.bRegex&&u.bRegex,bSmart=null!=u.bSmart&&u.bSmart,g(b,bRegex,bSmart,!1,u.iFilterLength,u.iMaxLenght)}}),j=0;j<h.length;j++){l.push(function(){var e=b.attr("id");return T("#"+e+"_range_from_"+h[j]).val()+w.sRangeSeparator+T("#"+e+"_range_to_"+h[j]).val()})}if(b.fnSettings().oFeatures.bServerSide){var r=b.fnSettings().fnServerData;b.fnSettings().fnServerData=function(t,n,a){for(j=0;j<h.length;j++){var e=h[j];for(k=0;k<n.length;k++)n[k].name=="sSearch_"+e&&(n[k].value=l[j]())}if(n.push({name:"sRangeSeparator",value:w.sRangeSeparator}),null!=r)try{r(t,n,a,b.fnSettings())}catch(e){r(t,n,a)}else T.getJSON(t,n,function(e){a(e)})}}}})}}(jQuery);